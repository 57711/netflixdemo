{"ast":null,"code":"import server from '../api/fetchData';\nexport const fetchData = list => {\n  return async dispatch => {\n    const response = await server.get(\"/\".concat(list)); //console.log(response);\n\n    dispatch({\n      type: \"FETCH_\".concat(list.toUpperCase()),\n      payload: response.data\n    });\n  };\n};\nexport const addMyList = item => {\n  return async dispatch => {\n    const response = await server.post(\"mylist\", item);\n    console.log(response);\n    dispatch({\n      type: \"ADD_ITEM\",\n      payload: response.data\n    });\n  };\n};\nexport const removeMyList = item => {\n  return async (dispatch, getState) => {\n    await server.delete(\"/mylist/\".concat(item.id));\n\n    try {\n      const response = await server.post(\"/recommendations\", item);\n      dispatch({\n        type: \"REMOVE_ITEM\",\n        payload: response.data\n      });\n    } catch (err) {\n      dispatch({\n        type: \"REMOVE_ITEM_MYLIST\",\n        payload: item\n      });\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/imsbt/OneDrive/桌面/httpd-2.4.39-win64-VS16/Apache24/htdocs/react/netflix/client/src/action/index.js"],"names":["server","fetchData","list","dispatch","response","get","type","toUpperCase","payload","data","addMyList","item","post","console","log","removeMyList","getState","delete","id","err"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,kBAAnB;AAEA,OAAO,MAAMC,SAAS,GAAIC,IAAD,IAAU;AAC/B,SAAO,MAAMC,QAAN,IAAkB;AACrB,UAAMC,QAAQ,GAAG,MAAMJ,MAAM,CAACK,GAAP,YAAeH,IAAf,EAAvB,CADqB,CAErB;;AACAC,IAAAA,QAAQ,CAAC;AACLG,MAAAA,IAAI,kBAAWJ,IAAI,CAACK,WAAL,EAAX,CADC;AAELC,MAAAA,OAAO,EAAEJ,QAAQ,CAACK;AAFb,KAAD,CAAR;AAIH,GAPD;AASH,CAVM;AAYP,OAAO,MAAMC,SAAS,GAAIC,IAAD,IAAU;AAC/B,SAAO,MAAMR,QAAN,IAAkB;AACrB,UAAMC,QAAQ,GAAG,MAAMJ,MAAM,CAACY,IAAP,CAAY,QAAZ,EAAqBD,IAArB,CAAvB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYV,QAAZ;AACAD,IAAAA,QAAQ,CAAC;AACLG,MAAAA,IAAI,EAAE,UADD;AAELE,MAAAA,OAAO,EAAEJ,QAAQ,CAACK;AAFb,KAAD,CAAR;AAIH,GAPD;AAQH,CATM;AAUP,OAAO,MAAMM,YAAY,GAAIJ,IAAD,IAAU;AAClC,SAAO,OAAOR,QAAP,EAAgBa,QAAhB,KAA6B;AAChC,UAAMhB,MAAM,CAACiB,MAAP,mBAAyBN,IAAI,CAACO,EAA9B,EAAN;;AACA,QAAG;AACC,YAAMd,QAAQ,GAAG,MAAMJ,MAAM,CAACY,IAAP,CAAY,kBAAZ,EAA+BD,IAA/B,CAAvB;AAEAR,MAAAA,QAAQ,CAAC;AACLG,QAAAA,IAAI,EAAE,aADD;AAELE,QAAAA,OAAO,EAAEJ,QAAQ,CAACK;AAFb,OAAD,CAAR;AAIH,KAPD,CAOC,OAAMU,GAAN,EAAU;AACPhB,MAAAA,QAAQ,CAAC;AACLG,QAAAA,IAAI,EAAE,oBADD;AAELE,QAAAA,OAAO,EAAEG;AAFJ,OAAD,CAAR;AAIH;AACJ,GAfD;AAiBH,CAlBM","sourcesContent":["import server from '../api/fetchData';\r\n\r\nexport const fetchData = (list) => {\r\n    return async dispatch => {\r\n        const response = await server.get(`/${list}`);\r\n        //console.log(response);\r\n        dispatch({\r\n            type: `FETCH_${list.toUpperCase()}`,\r\n            payload: response.data\r\n        })        \r\n    }\r\n\r\n}\r\n\r\nexport const addMyList = (item) => {\r\n    return async dispatch => {\r\n        const response = await server.post(\"mylist\",item);\r\n        console.log(response);\r\n        dispatch({\r\n            type: \"ADD_ITEM\",\r\n            payload: response.data\r\n        })\r\n    }\r\n}\r\nexport const removeMyList = (item) => {\r\n    return async (dispatch,getState) => {\r\n        await server.delete(`/mylist/${item.id}`);\r\n        try{\r\n            const response = await server.post(\"/recommendations\",item);\r\n\r\n            dispatch({\r\n                type: \"REMOVE_ITEM\",\r\n                payload: response.data\r\n            })\r\n        }catch(err){\r\n            dispatch({\r\n                type: \"REMOVE_ITEM_MYLIST\",\r\n                payload: item\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}